<html>
<head>
    <title>
        test Create
    </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    <!-- Code to create a data object -->
    <button onclick="callCreate()">Test Create</button>
</body>
<script>
    // POST request
    function callCreate() {
        var car = {reg:"12 G 1234", make:"ford", model:"Galaxy", price:123}
        //console.log("function called")
        $.ajax({
            url: "http://127.0.0.1:5000/cars",
            data: JSON.stringify(car),
            dataType: "JSON",
            method: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                console.log(result)   
            },
            error: function (xhr, status, msg) {
                console.log("error " + msg + "code is:" + status)
            }
        }
        )
    } 
    // DELETE request
    function callDelete(reg) {
        $.ajax({
            url: "http://127.0.0.1:5000/cars/" + encodeURI(reg),
            data: "",
            dataType: "JSON",
            method: "DELETE",
            success: function (result) {
                console.log(result)

            },
            error: function (xhr, status, msg) {
                console.log("error " + msg + "code is:" + status)
            }
        }
        )
    }
    // GET all request
    function callGetAll() {
            //console.log("function called")
            $.ajax({
                url:"http://127.0.0.1:5000/cars",
                data:"",
                dataType:"JSON",
                method:"GET",
                success:function(result){
                    console.log(result)
                    for (car of result.cars){
                        addCarToTable(car)
                    } 
                },
                error:function(xhr,status, msg){
                    console.log("error "+msg + "code is:"+status)
                }
            }
            )
        }
        // UPDATE request
        function callUpdate() {
        var reg = "12 G 1234"
        var car = {  price: 14000 }
        //console.log("function called")
        $.ajax({
            url: "http://127.0.0.1:5000/cars/"+encodeURI(reg),
            data: JSON.stringify(car),
            dataType: "JSON",
            method: "PUT",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                console.log(result)
            },
            error: function (xhr, status, msg) {
                console.log("error " + msg + "code is:" + status)
            }
        }
        )
    }
</script>
</html>